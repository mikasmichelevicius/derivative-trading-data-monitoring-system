{% extends "system/base.html" %}
{% block content %}
  <h1>View/Edit Trades</h1>
  <br>
  <form action="{% url 'system:viewTrades' %}" method="post">{% csrf_token %}
    {% if messages %}
      {% for message in messages %}
        <li> <font color="red">{{message}}</font> </li>
      {% endfor %}
    {% endif %}
    {% if trade_edit %}
        <p>Trade ID: {{ trade_edit.trade_id}}</p>
        <p>Date of Trade: {{trade_edit.trade_date|date:"d-m-Y"}}</p>
        <p>Seller Name: {{ trade_edit.seller_name }} </p>
        <p>Buyer: {{ trade_edit.buyer_name }} </p>
        <p>Product Name: {{ trade_edit.product }}</p>
        <p>Enter Quantity <input type = 'text'  name='quantity' value="{{ trade_edit.quantity }}"></p>
        <p>Enter Notional Currency <select name="notional_currency">
          {% for currency in currencies %}
            <option>{{ currency }}</option>
            {% if trade_edit.notional_currency %}
              <option selected>{{ trade_edit.notional_currency}}</option>
            {% endif %}
          {% endfor %}
        </select></p>
        <p>Enter Date of Maturity <input type = 'date'  name='maturity_date' value="{{trade_edit.maturity_date|date:"Y-m-d"}}" ></p>
        <p>Enter Underlying Price: {{trade_edit.underlying_price}}</p>
        <p>Enter Underlying Currency <select name="underlying_currency">
          {% for currency in currencies %}
            <option>{{ currency }}</option>
            {% if trade_edit.underlying_currency %}
              <option selected>{{ trade_edit.underlying_currency }}</option>
            {% endif %}
          {% endfor %}
        </select></p>
        <p>Enter Strike Price <input type = 'text'  name='strike_price' value="{{ trade_edit.strike_price }}"></p>
        <input type="submit" name="confirm_edits_submit"value="Confirm Edits"></input>
    {% endif %}
    <br>
    <br>
    <p>Select Day <input type="date"  name="selected_day" value="{{ date }}"></input></p>
    <input type="submit" name="selected_day_submit" value="Submit Day"></input>
    <br>
    <h3>Select trade to edit:</h3>
    {% if date %}
      <h5>Trades On: {{ date }} </h5>
    {% else %}
      <h5>Latest Trades:</h5>
    {% endif %}
      {% if view_trades %}
        <ul>
          {% for trade in view_trades %}
            <input type="radio" name="choice" value="{{ trade.trade_id }}">
            <label for="choice{{ forloop.counter }}">
              <b>ID:</b> {{trade.trade_id}}
              <b>Buyer:</b> {{ trade.buying_party }}
              <b>Seller:</b> {{trade.selling_party}}
            </label>
            <br>
          {% endfor %}
        </ul>
      {% endif %}
      {% if num_trades %}
      <label for="pg_number">Page Number: </label>
      <select name="pg_number" onChange="form.submit();">
        {% for num in num_trades %}
          <option value={{num}}>{{ num }}</option>
        {% endfor %}
        <option selected>{{ cur_pg }}</option>
      </select>

      <br>
      {% endif %}
      <input type="submit" name="selected_trade_submit" value="Select Trade"></input>
  </form>
{% endblock content %}
